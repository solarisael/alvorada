/* TYPOGRAPHY TOKENS MAP
 * 01) VIEWPORT FLUID RATIO
 * 02) TYPE SCALE
 * 03) LEADING (LINE-HEIGHT)
 * 04) MEASURE
 * 05) SPACING RHYTHM
 * 06) WEIGHT
 * 07) FONTS + CADENCE
 * 08) OVERRIDES: POV
 * 09) OVERRIDES: ROUTE
 * 10) CONSUMERS + UTILITIES
 */

:root {
  /* VIEWPORT FLUID RATIO */
  --type_viewport_min: 768;
  --type_viewport_max: 1440;
  --type_viewport_span: calc(
    var(--type_viewport_max) - var(--type_viewport_min)
  );
  --type_fluid_ratio: clamp(
    0,
    calc(
      (100vw - (var(--type_viewport_min) * 1px)) /
        (var(--type_viewport_span) * 1px)
    ),
    1
  );

  /* TYPE SCALE */
  --type_ui_base_min_px: 10;
  --type_ui_base_max_px: 12;
  --type_ui_body: clamp(
    calc(var(--type_ui_base_min_px) * 1px),
    calc(
      (var(--type_ui_base_min_px) * 1px) +
        (
          (var(--type_ui_base_max_px) - var(--type_ui_base_min_px)) *
            var(--type_fluid_ratio) * 1px
        )
    ),
    calc(var(--type_ui_base_max_px) * 1px)
  );
  --type_ui_n2: clamp(8px, calc(8px + (1px * var(--type_fluid_ratio))), 9px);
  --type_ui_n1: clamp(9px, calc(9px + (1px * var(--type_fluid_ratio))), 10px);
  --type_ui_0: var(--type_ui_body);
  --type_ui_1: clamp(12px, calc(12px + (2px * var(--type_fluid_ratio))), 14px);
  --type_ui_2: clamp(14px, calc(14px + (4px * var(--type_fluid_ratio))), 18px);
  --type_ui_3: clamp(18px, calc(18px + (6px * var(--type_fluid_ratio))), 24px);
  --type_ui_4: clamp(24px, calc(24px + (8px * var(--type_fluid_ratio))), 32px);
  --type_ui_5: clamp(30px, calc(30px + (10px * var(--type_fluid_ratio))), 40px);

  --type_reading_0: clamp(
    14px,
    calc(14px + (2px * var(--type_fluid_ratio))),
    16px
  );
  --type_reading_1: clamp(
    16px,
    calc(16px + (3px * var(--type_fluid_ratio))),
    19px
  );
  --type_reading_2: clamp(
    20px,
    calc(20px + (4px * var(--type_fluid_ratio))),
    24px
  );
  --type_reading_3: clamp(
    24px,
    calc(24px + (6px * var(--type_fluid_ratio))),
    30px
  );
  --type_reading_4: clamp(
    30px,
    calc(30px + (8px * var(--type_fluid_ratio))),
    38px
  );
  --type_reading_5: clamp(
    38px,
    calc(38px + (12px * var(--type_fluid_ratio))),
    50px
  );
  --type_reading_caption: clamp(
    12px,
    calc(12px + (1px * var(--type_fluid_ratio))),
    13px
  );

  /* LEADING (LINE-HEIGHT) */
  --leading_ui_body: 1.28;
  --leading_relaxed: 1.7;
  --leading_reading_body: 1.24;
  --leading_reading_heading: 1.06;
  --leading_reading_subheading: 1.12;

  /* MEASURE */
  --measure_reading_body: clamp(40ch, 88%, 68ch);

  /* SPACING RHYTHM */
  --space_reading_paragraph: 1.18em;
  --space_reading_section: 1.38em;
  --space_reading_heading_top: 1.44em;
  --space_reading_heading_bottom: 0.54em;

  /* WEIGHT */
  --weight_reading_body: 430;
  --weight_reading_heading: 560;
  --weight_cadence: 500;

  /* FONTS + CADENCE */
  --font_reading_body:
    "Atkinson Hyperlegible Next", "Source Sans 3", "Segoe UI", sans-serif;
  --font_reading_heading:
    "Fraunces", "Iowan Old Style", "Palatino Linotype", serif;
  --cadence_font_style: italic;
  --cadence_letter_spacing: 0.01em;
  --cadence_color_mix: 24%;
}

html {
  font-size: var(--type_ui_body);
  line-height: var(--leading_ui_body);
}

body {
  font-size: var(--type_ui_0);
  line-height: var(--leading_ui_body);
}

:where(
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  p,
  ul,
  ol,
  li,
  blockquote,
  pre,
  table,
  dl,
  dt,
  dd
) {
  margin: 0;
}

/* CONSUMERS: READING CONTAINERS */
:where(
  #main_reading_container,
  .reading_container,
  [data-reading-container="true"]
) {
  display: grid;
  row-gap: var(--space_reading_paragraph);
  font-family: var(--font_reading_body);
  font-size: var(--type_reading_0);
  line-height: var(--leading_reading_body);
  font-weight: var(--weight_reading_body);
}

:where(
    #main_reading_container,
    .reading_container,
    [data-reading-container="true"]
  )
  :where(h1),
.text_step_5 {
  font-family: var(--font_reading_heading);
  font-size: var(--type_reading_5);
  line-height: var(--leading_reading_heading);
  font-weight: var(--weight_reading_heading);
}

:where(
    #main_reading_container,
    .reading_container,
    [data-reading-container="true"]
  )
  :where(h2),
.text_step_4 {
  font-family: var(--font_reading_heading);
  font-size: var(--type_reading_4);
  line-height: var(--leading_reading_subheading);
  font-weight: var(--weight_reading_heading);
}

:where(
    #main_reading_container,
    .reading_container,
    [data-reading-container="true"]
  )
  :where(h3),
.text_step_3 {
  font-family: var(--font_reading_heading);
  font-size: var(--type_reading_3);
  line-height: var(--leading_reading_subheading);
  font-weight: var(--weight_reading_heading);
}

:where(
    #main_reading_container,
    .reading_container,
    [data-reading-container="true"]
  )
  :where(h4),
.text_step_2 {
  font-family: var(--font_reading_heading);
  font-size: var(--type_reading_2);
  line-height: var(--leading_reading_subheading);
  font-weight: var(--weight_reading_heading);
}

:where(
    #main_reading_container,
    .reading_container,
    [data-reading-container="true"]
  )
  :where(h5),
.text_step_1 {
  font-size: var(--type_reading_1);
  line-height: 1.35;
  font-weight: var(--weight_reading_heading);
}

:where(
    #main_reading_container,
    .reading_container,
    [data-reading-container="true"]
  )
  :where(h6),
.text_step_0,
:where(
    #main_reading_container,
    .reading_container,
    [data-reading-container="true"]
  )
  :where(p, li, dt, dd, th, td, a, blockquote) {
  font-size: var(--type_reading_0);
  line-height: var(--leading_reading_body);
}

:where(
    #main_reading_container,
    .reading_container,
    [data-reading-container="true"]
  )
  :where(small),
.text_step_n1 {
  font-size: var(--type_reading_caption);
  line-height: 1.4;
}

:where(
    #main_reading_container,
    .reading_container,
    [data-reading-container="true"]
  )
  :where(p, li, dt, dd, blockquote, pre, table, dl) {
  max-width: var(--measure_reading_body);
}

:where(
    #main_reading_container,
    .reading_container,
    [data-reading-container="true"]
  )
  :where(blockquote) {
  font-style: italic;
  padding-left: 1.1em;
  border-left: 1px solid
    color-mix(in oklch, var(--site_style_accent, currentColor) 28%, transparent);
}

/* OVERRIDES: POV */
body.pov_cinza {
  --font_reading_heading:
    "Fraunces", "Iowan Old Style", "Palatino Linotype", serif;
  --font_reading_body:
    "Atkinson Hyperlegible Next", "Source Sans 3", "Segoe UI", sans-serif;
  --type_reading_0: clamp(
    15px,
    calc(15px + (2px * var(--type_fluid_ratio))),
    17px
  );
  --leading_reading_body: 1.28;
  --measure_reading_body: clamp(39ch, 88%, 66ch);
  --space_reading_paragraph: 1.24em;
  --space_reading_section: 1.46em;
  --space_reading_heading_top: 1.52em;
  --space_reading_heading_bottom: 0.58em;
  --cadence_color_mix: 30%;
}

/* OVERRIDES: ROUTE */
body.route_rubedo {
  --type_reading_0: clamp(
    16px,
    calc(16px + (3px * var(--type_fluid_ratio))),
    19px
  );
  --leading_reading_heading: 1.04;
  --leading_reading_subheading: 1.1;
  --leading_reading_body: 1.3;
  --measure_reading_body: clamp(37ch, 84%, 62ch);
  --space_reading_paragraph: 1.3em;
  --space_reading_section: 1.54em;
}

/* CONSUMERS: CADENCE */
:where(
    #main_reading_container,
    .reading_container,
    [data-reading-container="true"]
  )
  :where(
    .text_fx_cadence,
    .text_fx_cadence_soft,
    .text_fx_cadence_oracular,
    .text_fx_cadence_childlike
  ) {
  font-style: var(--cadence_font_style);
  font-weight: var(--weight_cadence);
  letter-spacing: var(--cadence_letter_spacing);
  color: color-mix(
    in oklch,
    var(--site_style_accent, currentColor) var(--cadence_color_mix),
    currentColor
  );
}

/* CONSUMERS + UTILITIES */
.text_step_n2 {
  font-size: var(--type_reading_caption);
  line-height: 1.35;
}

.text_body {
  font-size: var(--type_reading_0);
  line-height: var(--leading_reading_body);
}

.text_lead {
  font-size: var(--type_reading_1);
  line-height: var(--leading_relaxed);
}

.text_kicker {
  font-size: var(--type_ui_n1);
  line-height: 1.45;
  letter-spacing: 0.06em;
  text-transform: uppercase;
}

.text_caption {
  font-size: var(--type_reading_caption);
  line-height: 1.4;
  letter-spacing: 0.03em;
}

@utility text_body {
  font-size: var(--type_reading_0);
  line-height: var(--leading_reading_body);
}

@utility text_lead {
  font-size: var(--type_reading_1);
  line-height: var(--leading_relaxed);
}

@utility text_kicker {
  font-size: var(--type_ui_n1);
  line-height: 1.45;
  letter-spacing: 0.06em;
  text-transform: uppercase;
}

@utility text_caption {
  font-size: var(--type_reading_caption);
  line-height: 1.4;
  letter-spacing: 0.03em;
}

@utility text_step_1 {
  font-size: var(--type_reading_1);
  line-height: 1.35;
}

@utility text_step_2 {
  font-size: var(--type_reading_2);
  line-height: var(--leading_reading_subheading);
}

@utility text_step_3 {
  font-size: var(--type_reading_3);
  line-height: var(--leading_reading_subheading);
}

@utility text_step_4 {
  font-size: var(--type_reading_4);
  line-height: var(--leading_reading_subheading);
}

@utility text_step_5 {
  font-size: var(--type_reading_5);
  line-height: var(--leading_reading_heading);
}
