@reference "tailwindcss";
@import "./utils.css";
@reference "@catppuccin/tailwindcss/mocha.css";

#page-main {
  @apply flex grow flex-col;
  @apply gap-2;
  @apply pt-24 md:pt-28;
}

#content {
  @apply flex grow flex-col;
  @apply px-2 py-2 md:px-3 md:py-2;
  @apply border-2;

  view-transition-name: page_content;

  border-color: color-mix(in oklch, var(--color-ctp-lavender) 30%, transparent);
  background:
    radial-gradient(
      120% 90% at 50% 0%,
      color-mix(in oklch, var(--color-ctp-lavender) 8%, transparent),
      transparent 72%
    ),
    linear-gradient(
      165deg,
      color-mix(in oklch, var(--color-ctp-mantle) 42%, transparent),
      color-mix(in oklch, var(--color-ctp-crust) 32%, transparent)
    );
  backdrop-filter: blur(5px);
}

.page-transition-breath-subtle {
  --page_fade_out_ms: 160ms;
  --page_fade_gap_ms: 60ms;
  --page_fade_in_ms: 220ms;
}

.page-transition-breath-noticeable {
  --page_fade_out_ms: 240ms;
  --page_fade_gap_ms: 20ms;
  --page_fade_in_ms: 180ms;
}

#content.htmx-request {
  animation-duration: calc(
    var(--page_fade_out_ms) + var(--page_fade_gap_ms) + var(--page_fade_in_ms)
  );
  animation-timing-function: linear;
}

::view-transition-group(page_content) {
  animation-duration: calc(
    var(--page_fade_out_ms) + var(--page_fade_gap_ms) + var(--page_fade_in_ms)
  );
  animation-timing-function: linear;
}

#content.htmx-swapping {
  animation-name: page_content_fade_out;
  animation-duration: var(--page_fade_out_ms);
  animation-timing-function: cubic-bezier(0.4, 0, 1, 1);
  animation-fill-mode: both;
}

::view-transition-old(page_content) {
  animation-name: page_content_fade_out;
  animation-duration: var(--page_fade_out_ms);
  animation-timing-function: cubic-bezier(0.4, 0, 1, 1);
  animation-fill-mode: both;
}

#content.htmx-added {
  animation-name: page_content_fade_in;
  animation-duration: var(--page_fade_in_ms);
  animation-delay: var(--page_fade_gap_ms);
  animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
  animation-fill-mode: both;
}

::view-transition-new(page_content) {
  animation-name: page_content_fade_in;
  animation-duration: var(--page_fade_in_ms);
  animation-delay: calc(var(--page_fade_out_ms) + var(--page_fade_gap_ms));
  animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
  animation-fill-mode: both;
}

@keyframes page_content_fade_out {
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
  }
}

@keyframes page_content_fade_in {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

#main_reading_shell {
  @apply flex w-full grow;
  @apply justify-center;
  @apply py-4 md:py-6;
}

#main_reading_container {
  @apply w-full;
  @apply rounded-2xl border;
  @apply px-5 py-6 md:px-8 md:py-8;

  inline-size: clamp(340px, 58vw, 66vw);
  border-color: color-mix(in oklch, var(--color-ctp-lavender) 36%, transparent);
  background:
    radial-gradient(
      180% 120% at 50% 0%,
      color-mix(in oklch, var(--color-citrinitas) 9%, transparent),
      transparent 60%
    ),
    linear-gradient(
      145deg,
      color-mix(in oklch, var(--color-ctp-mantle) 56%, transparent),
      color-mix(in oklch, var(--color-ctp-base) 38%, transparent)
    );
  box-shadow:
    0 20px 44px -34px rgb(0 0 0 / 0.9),
    inset 0 1px 0 rgb(255 255 255 / 0.08);
  backdrop-filter: blur(9px);
}

#nigredo-home-scaffold {
  @apply flex w-full grow flex-col;
  @apply gap-6 md:gap-8;
}

#nigredo-reading-article {
  @apply flex flex-col;
}

#nigredo-reading-header {
  @apply mb-5 flex flex-col;
  @apply gap-2;
}

#nigredo-kicker {
  color: color-mix(
    in oklch,
    var(--color-nigredo) 65%,
    var(--color-ctp-overlay0)
  );
}

#nigredo-title {
  @apply font-semibold;
}

#nigredo-reading-body {
  @apply flex flex-col;
  @apply gap-4;
}

#footer {
  @apply flex h-20 items-center justify-center;
  @apply mb-30 md:mb-0;
  @apply border-2;

  border-color: color-mix(in oklch, var(--color-ctp-lavender) 30%, transparent);
}

#footer a {
  @apply text-center;
}

@media (max-width: 768px) {
  #main_reading_container {
    inline-size: min(100%, 680px);
  }
}

@media (prefers-reduced-motion: reduce) {
  ::view-transition-group(page_content),
  ::view-transition-old(page_content),
  ::view-transition-new(page_content) {
    animation-duration: 1ms;
    animation-delay: 0ms;
  }
}
